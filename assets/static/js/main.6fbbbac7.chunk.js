(this["webpackJsonp@fabric/faucet"]=this["webpackJsonp@fabric/faucet"]||[]).push([[0],{224:function(e,t,n){},298:function(e,t,n){"use strict";(function(t){var s=n(82),r=n(422).default,a=n(41).default,i=n(42).default,c=n(97).default,o=n(98).default,u=n(126).default,h=n(127).default,l=n(275).P2P_CALL,d=(n(276),n(436),n(286)),f=n(437),b=n(438),p=(n(439).WebSocket,n(203)),j=n(443),m="application/json",g=function(e){u(g,e);var n=h(g);function g(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,g),(e=n.call(this,t)).settings=Object.assign({authority:"localhost",backoff:2,entropy:Math.random(),secure:!0,host:"hub.fabric.pub",port:443},t),e.host=e.settings.host||e.settings.authority,e.secure=e.settings.secure,e.socket=null,e.endpoint="".concat(e.secure?"wss":"ws",":").concat(e.host,":").concat(e.port,"/"),e._nextReconnect=0,e._reconnectAttempts=0,e._state={status:"PAUSED",messages:[],meta:{messages:{count:0}}},c(e,o(e))}return i(g,[{key:"port",get:function(){return this.settings.port}},{key:"isArrayBufferSupported",get:function(){return 1===new t(new Uint8Array([1]).buffer)[0]}},{key:"arrayBufferToBuffer",get:function(){return this.isArrayBufferSupported?this.arrayBufferToBufferAsArgument:this.arrayBufferToBufferCycle}},{key:"arrayBufferToBufferAsArgument",value:function(e){return new t(e)}},{key:"arrayBufferToBufferCycle",value:function(e){for(var n=new t(e.byteLength),s=new Uint8Array(e),r=0;r<n.length;++r)n[r]=s[r];return n}},{key:"_handleSocketClose",value:function(){var e=r(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._state.status="CLOSED",console.log("[FABRIC:REMOTE]","Socket close:",t),console.log("reconnecting:",this._reconnectAttempts,this._nextReconnect),this._reconnectAttempts++,this._reconnector=setTimeout(this.connect.bind(this),this._nextReconnect),this._nextReconnect=1e3*Math.pow(this.settings.backoff,this._reconnectAttempts)*Math.random();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleSocketError",value:function(){var e=r(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("[FABRIC:REMOTE]","Socket error:",t),this.emit("error",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleSocketMessage",value:function(){var e=r(s.mark((function e(n){var r,a,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("debug","[FABRIC:REMOTE] Socket packet ".concat(JSON.stringify(n))),r=n.data.byteLength,console.log("length:",r),a=t.from(n.data),console.log("buffer:",a),i=j.fromRaw(a).toObject(),console.log("message:",i),this._state.messages.push(i),++this._state.meta.messages.count,this.emit("message",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleSocketOpen",value:function(){var e=r(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._nextReconnect=0,this._reconnectAttempts=0,this._reconnector&&clearTimeout(this._reconnector),this._state.status="CONNECTED",this.emit("ready");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeMethod",value:function(){var e=r(s.mark((function e(t){var n,r,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:[],r=j.fromVector([l,JSON.stringify([t,n])]),console.log("call:",r),console.log("raw:",r.toRaw()),e.abrupt("return",this.socket.send(r.toRaw()));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=r(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._state.status="CONNECTING";try{this.socket=new WebSocket(this.endpoint),console.log("socket:",this.socket)}catch(t){console.error("[FABRIC:REMOTE]","Unable to connect:",t)}return this.socket&&(this.socket.binaryType="arraybuffer",this.socket.addEventListener("close",this._handleSocketClose.bind(this)),this.socket.addEventListener("open",this._handleSocketOpen.bind(this)),this.socket.addEventListener("message",this._handleSocketMessage.bind(this)),this.socket.addEventListener("error",this._handleSocketError.bind(this))),e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enumerate",value:function(){var e=r(s.mark((function e(){var t,n,r,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._OPTIONS("/");case 2:for(r in t=e.sent,n=[],t)a=t[r],n.push({name:a.name,description:a.description,components:Object.assign({list:"maki-resource-list",view:"maki-resource-view"},a.components),routes:a.routes,attributes:a.attributes,names:a.names});return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=r(s.mark((function e(n,r){var a,i,c,o,u,h,l,p,j,g,y,v,O=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=O.length>2&&void 0!==O[2]?O[2]:{},c=(i=this).settings.authority.split(":"),o=c[0]||(i.secure,"localhost"),u=c[1]||(i.secure?443:80),this.settings.port&&(u=this.settings.port),h=i.secure?"https":"http",l="".concat(h,"://").concat(o,":").concat(u).concat(r),p=null,j=null,y={method:n,headers:g={Accept:m,"Content-Type":m}},(this.settings.username||this.settings.password)&&(g.Authorization="Basic ".concat(t.from([this.settings.username||"",this.settings.password||""].join(":")).toString("base64"))),e.t0=a.mode,e.next="query"===e.t0?16:18;break;case 16:return l+="?"+d.stringify(a.body),e.abrupt("break",21);case 18:try{y.body=JSON.stringify(a.body)}catch(s){console.error("[FABRIC:REMOTE] Could not prepare request:",s)}return y=Object.assign(y,{body:a.body||null}),e.abrupt("break",21);case 21:return e.prev=21,e.next=24,f(l,y);case 24:j=e.sent,e.next=30;break;case 27:e.prev=27,e.t1=e.catch(21),i.emit("error","[REMOTE] exception: ".concat(e.t1));case 30:if(j){e.next=32;break}return e.abrupt("return",{status:"error",message:"No response to request."});case 32:e.t2=j.status,e.next=404===e.t2?35:37;break;case 35:return p={status:"error",message:"Document not found."},e.abrupt("break",62);case 37:if(!j.ok){e.next=59;break}v=b.parse(j.headers.get("content-type")),e.t3=v.type,e.next="application/json"===e.t3?42:52;break;case 42:return e.prev=42,e.next=45,j.json();case 45:p=e.sent,e.next=51;break;case 48:e.prev=48,e.t4=e.catch(42),console.error("[REMOTE]","Could not parse JSON:",e.t4);case 51:return e.abrupt("break",57);case 52:return this.settings.verbosity>=4&&i.emit("warning","[FABRIC:REMOTE] Unhandled headers content type: ".concat(v.type)),e.next=55,j.text();case 55:return p=e.sent,e.abrupt("break",57);case 57:e.next=61;break;case 59:this.settings.verbosity>=4&&console.warn("[FABRIC:REMOTE]","Unmanaged HTTP status code:",j.status);try{p=j.json()}catch(s){p=j.text()}case 61:return e.abrupt("break",62);case 62:return e.abrupt("return",p);case 63:case"end":return e.stop()}}),e,this,[[21,27],[42,48]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"ping",value:function(){var e=r(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.send({created:(new Date).toISOString(),type:"PING"});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=r(s.mark((function e(t){var n,r,a;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.fromVector(["GenericMessage",JSON.stringify(t)]),r=n.toRaw(),console.log("raw:",r),console.log("raw (string):",r.toString("hex")),a=new p({content:r.toString("hex")}),this.socket.send(r),e.abrupt("return",a.id);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendAsJSON",value:function(){var e=r(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.socket.send({content:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_PUT",value:function(){var e=r(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("put",t,{body:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_GET",value:function(){var e=r(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("get",t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_POST",value:function(){var e=r(s.mark((function e(t,n){var r,a,i,c=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:{},a=null,i=null,e.t0=r.mode,e.next="query"===e.t0?6:8;break;case 6:return i=Object.assign({},{body:n,mode:"query"}),e.abrupt("break",10);case 8:return i=Object.assign({},r,{body:n,mode:"body"}),e.abrupt("break",10);case 10:return e.next=12,this.request("post",t,i);case 12:return a=e.sent,e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_OPTIONS",value:function(){var e=r(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("options",t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_PATCH",value:function(){var e=r(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("patch",t,{body:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_DELETE",value:function(){var e=r(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("delete",t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_SEARCH",value:function(){var e=r(s.mark((function e(t,n){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("search",t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),g}(p);e.exports=g}).call(this,n(7).Buffer)},318:function(e,t,n){},319:function(e,t,n){},329:function(e,t){},33:function(e,t,n){"use strict";var s=n(317);e.exports={host:"65.21.231.166",port:9999,secure:!1,seed:null,status:"PAUSED",balances:[{asset:"Bitcoin",symbol:"BTC",confirmed:0,type:"confirmed"},{asset:"Liquid BTC (LBTC)",symbol:"BTC",confirmed:0,type:"confirmed"},{asset:"Shyft",symbol:"SHFT",confirmed:0,type:"confirmed"},{asset:"Bitcoin (testnet)",symbol:"TBTC",confirmed:0,type:"confirmed"},{asset:"Bitcoin (regtest)",symbol:"RBTC",confirmed:0,type:"confirmed"},{asset:"BTC A",symbol:"BTCA",confirmed:0,type:"confirmed"},{asset:"BTC B",symbol:"BTCB",confirmed:0,type:"confirmed"},{asset:"Lightning BTC",symbol:"BTC",confirmed:.001,type:"outbound"},{asset:"Lightning BTC",symbol:"BTC",confirmed:.001,type:"inbound"}],chains:[{name:"Fabric (playnet)",asset:"PFAB",tip:"???"},{name:"Bitcoin (mainnet)",asset:"BTC",tip:"???",genesis:"000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f"},{name:"Bitcoin (regtest)",asset:"RBTC",tip:"???"},{name:"Bitcoin (testnet)",asset:"TBTC",tip:"???"},{name:"BTC A (regtest)",asset:"BTCA",tip:"???"},{name:"BTC B (regtest)",asset:"BTCB",tip:"???"},{name:"Ethereum (Ropsten)",asset:"ETHR",tip:"???"}],channels:[],keys:[],identity:{id:"",seed:s.key.seed},nodes:["localhost:9977","localhost:9978","localhost:9979","localhost:9980","localhost:9981"],orders:[],peers:[{id:"???",alias:"NUEVO",host:"localhost",port:"7777",asset:"BTC"}],transactions:[]}},331:function(e,t){},342:function(e,t){},344:function(e,t){},370:function(e,t){},371:function(e,t){},377:function(e,t){},395:function(e,t){},425:function(e,t){},427:function(e,t){},439:function(e,t){},489:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(62),i=n.n(a),c=(n(488),n(33));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(224);var o=n(27),u=n(28),h=n(31),l=n(29),d=n(30),f=n(32),b=n(37),p=n.n(b),j=n(217),m=n(12),g=(n(318),n(319),n(77)),y=n.n(g),v=n(215),O=n(509),k=n(2),x=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(o.a)(this,n),s=t.call(this,e),e.import&&(s.state=p()({integrity:null,status:"PAUSED"},c,e)),s.actor=new g(s.state),s.ec=new v("secp256k1"),s.ref=r.a.createRef(),Object(h.a)(s,Object(l.a)(s))}return Object(u.a)(n,[{key:"genesis",get:function(){return this.actor?this.actor.id:"00000000000000000000000000000000"}},{key:"dochash",get:function(){return this.actor?this.actor.id:"00000000000000000000000000000000"}},{key:"link",get:function(){return"fabric:".concat(this.dochash)}},{key:"integrity",get:function(){return"sha256-deadbeefbabe"}},{key:"componentDidMount",value:function(){this.start(),console.log("[FABRIC:COMPONENT]","Mounted:",this)}},{key:"componentWillReceiveProps",value:function(e){this.setState({hash:e.hash})}},{key:"render",value:function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("fabric-component",{ref:this.ref,children:Object(k.jsxs)(O.a,{children:[Object(k.jsx)(O.a.Content,{children:Object(k.jsx)("fabric-graph",{children:Object(k.jsx)("svg",{id:"graph"})})}),Object(k.jsx)(O.a.Content,{children:this.props.children})]})})})}},{key:"start",value:function(){var e=new g(this.state);return console.log("actor:",e),console.log("actor ID:",e.id.constructor.name,e.id),this.setState({hash:e.id}),this}}]),n}(s.Component),w=n(175),C=n(82),S=n.n(C),B=n(490),_=n(94),T=n(506),R=n(136),E=n(298),A=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).settings=Object.assign({host:"localhost",port:9999},e),s.state=p()({integrity:"sha256-deadbeefbabe",status:"disconnected",messages:[],meta:{messages:{count:0}}},c,e),console.log("bridge settings:",s.settings),s.remote=new E({host:s.settings.host,port:s.settings.port,secure:s.settings.secure}),Object(h.a)(s,Object(l.a)(s))}return Object(u.a)(n,[{key:"_handleRemoteMessage",value:function(e){console.log("Remote message:",e),this._syncState()}},{key:"_handleRemoteError",value:function(e){console.log("Remote error:",e)}},{key:"_syncState",value:function(){this.setState({status:this.remote._state.status,messages:this.remote._state.messages,meta:this.remote._state.meta})}},{key:"componentDidMount",value:function(){console.log("bridge mounted! starting..."),this.start()}},{key:"connect",value:function(){this._syncState(),this.remote.connect(),this._syncState()}},{key:"executeMethod",value:function(e,t){return this.remote.executeMethod(e,t)}},{key:"ping",value:function(){this.remote.ping()}},{key:"render",value:function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(O.a,{fluid:!0,children:[Object(k.jsxs)(O.a.Content,{children:[Object(k.jsxs)(B.a.Group,{floated:"right",children:[Object(k.jsxs)(B.a,{onClick:this.ping.bind(this),children:["Ping ",Object(k.jsx)(_.a,{name:"info"})]}),Object(k.jsxs)(B.a,{onClick:this.connect.bind(this),children:["Connect ",Object(k.jsx)(_.a,{name:"lightning"})]})]}),Object(k.jsx)(O.a.Header,{as:"h3",children:"Bridge"})]}),Object(k.jsx)(O.a.Content,{children:Object(k.jsx)(T.a,{children:this.state.messages.map((function(e,t){return Object(k.jsx)(T.a.Event,{size:"small",style:{fontSize:"0.8em",fontFamily:"monospace"},children:Object(k.jsx)(T.a.Content,{children:Object(k.jsx)("div",{style:{color:"black"},children:JSON.stringify(e,null,"  ")})})},t)}))})}),Object(k.jsxs)(O.a.Content,{extra:!0,children:[Object(k.jsxs)(R.a,{children:[Object(k.jsx)(_.a,{name:"info"})," ",this.remote._state.status]}),Object(k.jsxs)(R.a,{children:[Object(k.jsx)(_.a,{name:"mail"})," ",this.remote._state.meta.messages.count]})]})]})})}},{key:"_handleRemoteReady",value:function(){var e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncState(),console.log("Remote ready!"),e.next=4,this.executeMethod("btc_getbalances");case 4:t=e.sent,console.log("balances:",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(w.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.remote.send(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.remote.on("ready",this._handleRemoteReady.bind(this)),this.remote.on("message",this._handleRemoteMessage.bind(this)),this.remote.on("error",this._handleRemoteError.bind(this)),this.connect();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x),N=A,M=n(54),D=(n(510),n(507)),I=n(511),P=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={transactions:[],integrity:"sha256-deadbeefbabe"},s}return Object(u.a)(n,[{key:"_addKey",value:function(e){this.setState({keys:this.state.keys.concat(e)})}},{key:"render",value:function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:"ui vertical stripe segment",children:Object(k.jsx)("div",{className:"ui stackable grid container",children:Object(k.jsx)("div",{className:"row",children:Object(k.jsx)("div",{className:"column",children:Object(k.jsx)(O.a,{fluid:!0,children:Object(k.jsxs)(O.a.Content,{children:[Object(k.jsx)(I.a,{children:Object(k.jsxs)("h1",{children:[Object(k.jsx)(_.a,{name:"tasks"})," Transactions"]})}),Object(k.jsxs)(D.a,{celled:!0,children:[Object(k.jsx)(D.a.Header,{children:Object(k.jsxs)(D.a.Row,{children:[Object(k.jsx)(D.a.HeaderCell,{children:"ID"}),Object(k.jsx)(D.a.HeaderCell,{children:"Version"}),Object(k.jsx)(D.a.HeaderCell,{children:"Inputs"}),Object(k.jsx)(D.a.HeaderCell,{children:"Outputs"}),Object(k.jsx)(D.a.HeaderCell,{children:"Signature"})]})}),Object(k.jsx)(D.a.Body,{children:this.state.transactions.map((function(e,t){return Object(k.jsxs)(D.a.Row,{children:[Object(k.jsx)(D.a.Cell,{children:e.id}),Object(k.jsx)(D.a.Cell,{children:e.version}),Object(k.jsx)(D.a.Cell,{children:e.inputs}),Object(k.jsx)(D.a.Cell,{children:e.outputs}),Object(k.jsx)(D.a.Cell,{children:e.signature})]},t)}))})]})]})})})})})})})}}]),n}(x),L=n(503),q=n(512),F=n(504),H=n(220),U=n(300),G=n(88),J=n(67),W=n(137),V=n(505),z=n(502),K=n(508),Y=n(299),$=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).settings=p()({network:"regtest"},e),s.state=p()({address:null,content:{requests:[]},requests:{},secret:g.randomBytes(32)},e),Object(h.a)(s,Object(l.a)(s))}return Object(u.a)(n,[{key:"networks",get:function(){return{mainnet:W.networks.mainnet,regtest:W.networks.regtest,testnet:W.networks.testnet}}},{key:"_handleAddressChange",value:function(e){console.log("address field:",this.address.current),this.setState({address:e.target.value}),console.log("state:",this.state),console.log("value:",e.target.value),console.log("network:",this.networks.regtest);var t=this.validateAddress(e.target.value);console.log("isValid:",t),t||this.setState({status:"ERROR",errors:["Invalid Bitcoin address."]})}},{key:"_handleSecretChange",value:function(e){this.setState({secret:e.target.value})}},{key:"_handleSubmitButtonClick",value:function(e){console.log("submit button click:",e)}},{key:"_handleChange",value:function(e){var t=Object(H.a)(Object(H.a)({},this.state.fields),{},Object(M.a)({},e.target.name,e.target.value));this.setState({fields:t})}},{key:"handleChange",value:function(e){this.setState({address:e.target.value})}},{key:"handleSubmit",value:function(e){console.log("submitting:",e);var t=this.state,n=t.name,s=t.email;this.setState({submittedName:n,submittedEmail:s})}},{key:"regenerate",value:function(){this.setState({secret:g.randomBytes(32)}),this.sync()}},{key:"render",value:function(){var e=this;function t(t){e.modal.current.setState({open:t})}return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(V.a,{ref:this.props.form,loading:"LOADING"===this.state.status?"loading":void 0,disabled:"LOADING"===this.state.status?"disabled":void 0,onSubmit:this.props.onSubmit.bind(this),onChange:this.handleChange.bind(this),children:Object(k.jsxs)(V.a.Field,{children:[Object(k.jsx)("label",{children:"Request a deposit to..."}),Object(k.jsxs)("div",{className:"ui input",children:[Object(k.jsx)(z.a,{ref:this.props.field,action:!0,type:"text",placeholder:"Enter a Bitcoin address here",value:this.state.address?this.state.address:void 0}),Object(k.jsx)(B.a,{ref:this.props.button,attached:!0,type:"submit",loading:"LOADING"===this.state.status?"loading":void 0,disabled:"LOADING"===this.state.status?"disabled":void 0,color:"green",content:"Request",icon:"right chevron",labelPosition:"right",onClick:this.props.onSubmit.bind(this)})]}),Object(k.jsxs)(K.a,{ref:this.props.modal,onClose:function(){return t(!1)},onOpen:function(){return t(!0)},open:this.state.open,children:[Object(k.jsx)(K.a.Header,{children:"Select a Photo"}),Object(k.jsxs)(K.a.Content,{image:!0,children:[Object(k.jsx)(Y.a,{size:"medium",src:"/images/avatar/large/rachel.png",wrapped:!0}),Object(k.jsxs)(K.a.Description,{children:[Object(k.jsx)(I.a,{children:"Default Profile Image"}),Object(k.jsx)("p",{children:"We've found the following gravatar image associated with your e-mail address."}),Object(k.jsx)("p",{children:"Is it okay to use this photo?"})]})]}),Object(k.jsxs)(K.a.Actions,{children:[Object(k.jsx)(B.a,{color:"black",onClick:function(){return t(!1)},children:"Nope"}),Object(k.jsx)(B.a,{content:"Yep, that's me",labelPosition:"right",icon:"checkmark",onClick:function(){return t(!1)},positive:!0})]})]})]})})})}},{key:"start",value:function(){return console.log("[FAUCET:DRIPS]","Starting component..."),Object(U.a)(Object(G.a)(n.prototype),"start",this).call(this),this.sync(),this}},{key:"sync",value:function(){var e=Object(J.createHash)("sha256").update(this.state.secret).digest("hex");return this.setState({preimage:e}),this}},{key:"validateAddress",value:function(e){try{return W.address.toOutputScript(e,this.networks[this.settings.network]),!0}catch(t){return!1}}}]),n}(x),Q=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).settings=Object.assign({host:"localhost",integrity:"sha256-deadbeefbabe",status:"PAUSED"},e),s.state=Object.assign({},s.settings,e),s.bridge=r.a.createRef(),s.button=r.a.createRef(),s.field=r.a.createRef(),s.form=r.a.createRef(),s.modal=r.a.createRef(),Object(h.a)(s)}return Object(u.a)(n,[{key:"onSubmit",value:function(e){var t=this;this.form.current.setState({status:"LOADING"}),this.button.current.setState({status:"LOADING "});var n={type:"Call",data:{method:"DripRequest",params:[this.form.current.state.address]}};console.log("Message to send over bridge:",n),setTimeout((function(){t.bridge.current.send(n).then((function(e){console.log("Message sent over bridge, result:",e),t.field.current.value="",t.field.current.setState({address:""}),t.form.current.setState({status:"LOADED"}),t.button.current.setState({status:"LOADED "})}))}),1e3)}},{key:"render",value:function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("fabric-bridge-home",{ref:this.ref,children:Object(k.jsx)(L.a,{onBottomPassed:this._handleMastheadBottomPassed.bind(this),children:Object(k.jsx)(q.a,{className:"ui inverted vertical masthead center aligned segment",children:Object(k.jsxs)(F.a,{className:"ui text container",children:[Object(k.jsxs)("h1",{className:"ui inverted header",children:[Object(k.jsx)(_.a,{name:"tint"})," bitfaucet"]}),Object(k.jsxs)("h2",{children:["The official ",Object(k.jsx)("code",{children:"@fabric/playnet"})," faucet."]}),Object(k.jsxs)(F.a,{className:"left aligned",style:{marginTop:"5em"},children:[Object(k.jsx)(O.a,{fluid:!0,children:Object(k.jsx)(O.a.Content,{children:Object(k.jsx)($,{ref:this.form,button:this.button,field:this.field,onSubmit:this.onSubmit.bind(this)})})}),Object(k.jsx)(O.a,{fluid:!0,children:Object(k.jsx)(O.a.Content,{children:Object(k.jsx)(N,{ref:this.bridge,host:this.state.host,onChange:this._handleBridgeChange.bind(this),state:this.state})})})]})]})})})})})}},{key:"_handleBridgeChange",value:function(e){console.log("bridge change:",e)}},{key:"_handleMastheadBottomPassed",value:function(e,t){var n=t.calculations;console.log("vis change:",e,n),this.setState({calculations:n})}}]),n}(x),X=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).settings=b({},c,e),s.state=b({actor:null,host:"localhost",integrity:null,snapshots:[]},c,e),Object(h.a)(s,Object(l.a)(s))}return Object(u.a)(n,[{key:"_handleBridgeChange",value:function(e){console.log("bridge change:",e)}},{key:"componentDidMount",value:function(){new y.a(this.state);return this}},{key:"render",value:function(){return Object(k.jsx)("react-application",{id:"root",children:Object(k.jsx)(j.a,{children:Object(k.jsx)("div",{className:"pusher",children:Object(k.jsxs)(m.c,{children:[Object(k.jsx)(m.a,{path:"/",exact:!0,element:Object(k.jsx)(Q,{state:this.state,balances:this.state.balances,keys:this.state.keys,host:this.state.host})}),Object(k.jsx)(m.a,{path:"/transactions",element:Object(k.jsx)(P,{state:this.state,balances:this.state.balances,keys:this.state.keys})})]})})})})}}]),n}(x);i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(X,{state:c,host:c.host})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[489,1,2]]]);
//# sourceMappingURL=main.6fbbbac7.chunk.js.map